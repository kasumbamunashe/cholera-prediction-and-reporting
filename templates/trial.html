<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create admin</title>
</head>
<body>
<div class="admin-management-container">
        <div id="admin-management-container" class="content-section" >
        <h2>Admin Management</h2>
            <div class="crud-container">
             <div class="create-container">
                 <h3>Create new admin</h3>
                 <form>
                     <input type="text" placeholder="Name" name="name">
                     <input type="Email" placeholder="Email" name="email">
                     <input type="Password" placeholder="Password"name="password">
                     <button>Add</button>
                 </form>
            </div>
                <div class="read-container">
                    <h3>Admin List</h3>
                    <table>
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <div class="edit-container">
                    <h3>Edit Admin</h3>
                     <form>
                     <input type="text" placeholder="Name" name="name">
                     <input type="Email" placeholder="Email" name="email">
                     <input type="Password" placeholder="Password"name="password">
                     <button Edit>Update</button>
                 </form>
                </div>
                <div class="delete-container">
                    <h3>Delete Admin</h3>
                    <button Delete>Delete</button>
                </div>
        </div>
        </div>
</div>
<script>
// Read
document.querySelector('.read-container button').addEventListener('click', () => {
  fetch('/admin/read')
    .then(response => response.json())
    .then(admins => {
      const tableBody = document.querySelector('.read-container tbody');
      admins.forEach(admin => {
        const tableRow = document.createElement('tr');
        tableRow.innerHTML = `
          <td>${admin.name}</td>
          <td>${admin.email}</td>
          <td>
            <button class="edit-btn" data-id="${(link unavailable)}">Edit</button>
            <button class="delete-btn" data-id="${(link unavailable)}">Delete</button>
          </td>
        `;
        tableBody.appendChild(tableRow);
      });
    });
});

// Edit
document.querySelectorAll('.edit-container button').forEach(button => {
  button.addEventListener('click', () => {
    const id = button.getAttribute('data-id');
    const name = document.querySelector(`.edit-container input[name="name"][data-id="${id}"]`).value;
    const email = document.querySelector(`.edit-container input[name="email"][data-id="${id}"]`).value;
    const password = document.querySelector(`.edit-container input[name="password"][data-id="${id}"]`).value;
    fetch(`/admin/update/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, email, password }),
    });
  });
});

// Delete
document.querySelectorAll('.delete-container button').forEach(button => {
  button.addEventListener('click', () => {
    const id = button.getAttribute('data-id');
    fetch(`/admin/delete/${id}`, { method: 'DELETE' });
  });
});
</script>
</body>
</html>